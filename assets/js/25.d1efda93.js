(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{418:function(t,a,s){"use strict";s.r(a);var e=s(5),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"before-sync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#before-sync"}},[t._v("#")]),t._v(" Before Sync")]),t._v(" "),s("p",[t._v('Certain files will need to be absent or deleted prior to download. . A quicksync replaces blockchain data with a customized snapshot. For most use cases a "pruned" version is adequate. Pruned  versions will have certain transactions removed from the archive to make node performace smoother. If you are running a node for archival purposes, you will want an "archive" or "default" download.')]),t._v(" "),s("p",[t._v("After choosing  the approprite download type, examine your node and ensure  that "),s("code",[t._v(".terra/data")]),t._v(" is empty")]),t._v(" "),s("p",[s("strong",[t._v("Example")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(":22PM INF Removed all blockchain "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("dir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/ubuntu/.terra/data\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("If you are a validator, ensure that you do not remove your private key.")]),t._v(" "),s("p",[t._v("Example of a removed private key:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(":22PM INF Reset private validator "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" to genesis state "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("keyFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/ubuntu/.terra/config/priv_validator_key.json "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("stateFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/ubuntu/.terra/data/priv_validator_state.json\n")])])])]),t._v(" "),s("p",[t._v("If you have an address book downloaded, you may keep it. Otherwise, you will need to download the "),s("a",{attrs:{href:"https://docs.terra.money/How-to/Run-a-full-Terra-node/Joining-a-network.html#_2-download-genesis-file-and-address-book",target:"_blank",rel:"noopener noreferrer"}},[t._v("appropriate addressbook"),s("OutboundLink")],1),t._v(" prior to running   "),s("code",[t._v("terrad start")]),t._v(".")]),t._v(" "),s("h1",{attrs:{id:"during-sync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#during-sync"}},[t._v("#")]),t._v(" During Sync")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Sync start times")]),t._v(" "),s("p",[t._v("Nodes take at least an hour to start syncing. This wait is normal. Before troubleshooting a sync, please wait an hour for the sync to start.")])]),t._v(" "),s("h2",{attrs:{id:"monitor-the-sync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#monitor-the-sync"}},[t._v("#")]),t._v(" Monitor the sync")]),t._v(" "),s("p",[t._v("Your node is catching up with the network by replaying all the transactions from genesis and recreating the blockchain state locally. You can verify this process by checking the "),s("code",[t._v("latest_block_height")]),t._v(" in the "),s("code",[t._v("SyncInfo")]),t._v(" of the "),s("code",[t._v("terrad status")]),t._v(" response:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"SyncInfo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"latest_block_height"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"42"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" <-----\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"catching_up"')]),t._v("        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Compare this height to the "),s("strong",[t._v("Latest Blocks")]),t._v(" on "),s("a",{attrs:{href:"https://terra.stake.id/#/",target:"_blank",rel:"noopener noreferrer"}},[t._v("stake.id"),s("OutboundLink")],1),t._v(" to see your progress.")]),t._v(" "),s("h2",{attrs:{id:"quicksync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quicksync"}},[t._v("#")]),t._v(" Quicksync")]),t._v(" "),s("p",[t._v("You can significantly accelerate the synchronization process by providing "),s("code",[t._v("terrad")]),t._v(" with a recent snapshot of the network state. Snapshots are made publicly available by the Terra community and can be downloaded at "),s("a",{attrs:{href:"https://quicksync.io/networks/terra.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://quicksync.io/networks/terra.html"),s("OutboundLink")],1),t._v(". Choose the snapshot corresponding to your network type ("),s("code",[t._v("testnet")]),t._v("/"),s("code",[t._v("mainnet")]),t._v(") and a mirror close to the location of your node server.")]),t._v(" "),s("p",[t._v("Before downloading a snapshot, make sure that you have the streaming and unpacking utilities installed:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" liblz4-tool aria2 -y\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Tip: Circumvent local download")]),t._v(" "),s("p",[t._v("Do not click the download link if you are using a separately hosted node, as this will not download to the correct machine. Instead, copy the link by right-clicking the  "),s("code",[t._v("Download")]),t._v(" button. Downloading locally is not recommended unless you are hosting your node on the same computer from which you are browsing.")]),t._v(" "),s("p",[t._v("The link in your clipboard should resemble the following:")]),t._v(" "),s("p",[s("em",[s("strong",[t._v("https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4")])])])]),t._v(" "),s("p",[t._v("The archived snapshot contains the state and transactions of the network, which are stored in the "),s("code",[t._v("~/.terra/data/")]),t._v(" folder by default. You should navigate exactly to the "),s("code",[t._v("~/.terra/")]),t._v(" folder before proceeding to unpack it, or make sure that the contents of the archive are placed into "),s("code",[t._v("~/.terra/")]),t._v(".")]),t._v(" "),s("ol",[s("li",[t._v("Download the snapshot.")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# aria2c is a multi-source command-line download utility")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# specify N cores(up to 16) to speed up the process via -xN (5 cores used below)")]),t._v("\naria2c -x5 https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Unpack the "),s("code",[t._v(".lz4")]),t._v(" archive:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lz4 -d bombay-12-default.20220107.0510.tar.lz4\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Unpack the "),s("code",[t._v(".tar")]),t._v(" archive into "),s("code",[t._v("~/.terra")]),t._v(". Its contents must replace "),s("code",[t._v("~/.terra/data/")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xvf bombay-12-default.20220107.0510.tar\n")])])]),s("p",[t._v("Due to the size of the network, this may take some time.")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("After the snapshot is completely unpacked, start "),s("code",[t._v("terrad")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("terrad start\n")])])]),s("h2",{attrs:{id:"sync-complete"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sync-complete"}},[t._v("#")]),t._v(" Sync Complete")]),t._v(" "),s("p",[t._v("You can tell that your node is in sync with the network when "),s("code",[t._v("SyncInfo.catching_up")]),t._v(" in the "),s("code",[t._v("terrad status")]),t._v(" response returns "),s("code",[t._v("false")]),t._v(" and the "),s("code",[t._v("latest_block_height")]),t._v(" corresponds to the public network blockheight found on "),s("a",{attrs:{href:"https://terra.stake.id/#/",target:"_blank",rel:"noopener noreferrer"}},[t._v(" stake.id "),s("OutboundLink")],1),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("terrad status  \n")])])]),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"SyncInfo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"latest_block_height"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7356350"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"catching_up"')]),t._v("        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("Validators can view the status of the network using "),s("a",{attrs:{href:"https://finder.terra.money",target:"_blank",rel:"noopener noreferrer"}},[t._v("Terra Finder"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("h2",{attrs:{id:"verify-the-snapshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#verify-the-snapshot"}},[t._v("#")]),t._v(" Verify the snapshot")]),t._v(" "),s("p",[t._v("To verify the validity of the snapshot, use a "),s("code",[t._v("sha512sum")]),t._v(" to check it against a cosmos validator's registry of transactions.")]),t._v(" "),s("h3",{attrs:{id:"compare-checksum-with-its-on-chain-version"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compare-checksum-with-its-on-chain-version"}},[t._v("#")]),t._v(" Compare checksum with its on-chain version.")]),t._v(" "),s("p",[t._v("For this example, we will use the following snapshot URL:")]),t._v(" "),s("p",[s("code",[t._v("https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4")])]),t._v(" "),s("ol",[s("li",[t._v("To make things easier for checking, assign the URL to a variable:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("URL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://dl2.quicksync.io/bombay-12-default.20220107.0510.tar.lz4\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Obtain the checksum for the snapshot:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$URL")]),t._v(".checksum\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bombay-12-default.20220 100%[==============================>]  59.55K   215KB/s    in 0.3s    ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2022-01-08 07:30:06 (215 KB/s) - 'bombay-12-default.20220107.0510.tar.lz4.checksum.1' saved [60984/60984]")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Obtain the tx hash and assign it to a variable for brevity:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HASH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s $URL.hash"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("   \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 80E12115FEA1B3A161A2FDE7367FC34B8714EF398DAE5B1396F9748BC6218DB1")]),t._v("\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("Obtain the transaction profile and verify it:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s https://lcd-cosmos.cosmostation.io/txs/"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s $URL.hash"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" jq -r "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.tx.value.memo'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("sha512sum -c\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bombay-12-default.20220107.0510.tar.lz4.checksum: OK")]),t._v("\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("Obtain the checksum script and verify the provided snapshot:")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://raw.githubusercontent.com/chainlayer/quicksync-playbooks/master/roles/quicksync/files/checksum.sh\n./checksum.sh "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),t._v(" $URL"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n")])])]),s("h2",{attrs:{id:"sync-faster-during-testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sync-faster-during-testing"}},[t._v("#")]),t._v(" Sync faster during testing")]),t._v(" "),s("p",[t._v("Sometimes you may want to sync faster by foregoing checks. This command should only be used by advanced users in non-production environments. To speed up the sync process during testing, use the following command:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("terrad start --x-crisis-skip-assert-invariants\n")])])]),s("h2",{attrs:{id:"congratulations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#congratulations"}},[t._v("#")]),t._v(" Congratulations!")]),t._v(" "),s("p",[t._v("Congratulations! You've successfully joined a network as a full node operator. If you are a validator, continue to "),s("RouterLink",{attrs:{to:"/How-to/Manage-a-Terra-validator/Overview.html"}},[t._v("manage a Terra validator")]),t._v(" for the next steps.")],1)])}),[],!1,null,null,null);a.default=r.exports}}]);